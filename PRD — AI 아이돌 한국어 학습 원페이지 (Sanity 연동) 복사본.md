# PRD — AI 아이돌 한국어 학습 원페이지 (Sanity 연동)

1. ## 제품 개요

2. \- 제품 목적: AI 아이돌 콘텐츠를 활용해 한국어를 배우는 웹 경험 제공.  
3. \- 핵심 컨셉: 세련되고 키치한 비주얼 \+ 원페이지 스크롤 학습 흐름 \+ 버전(콘텐츠 세트) 단위로 교체/확장 가능한 CMS 운영.  
4. \- 저작권: 제공되는 가사/콘텐츠는 저작권 이슈가 없는 소스만 사용.

## 2\. 목표 / 비목표

### 목표

- 하나의 페이지에서 아래로 스크롤하며 다음 섹션으로 학습 흐름이 이어진다.  
- \- 좌측 “세로 점(도트) 인덱스”로 섹션 바로가기(앵커 점프)가 가능하다.  
- \- 커버는 1장 크게 \+ 나머지 썸네일로 전환 가능한 형태로 제공한다.  
- \- EPUB은 인라인 뷰어로 렌더링한다.  
- \- 데스크톱/태블릿은 2페이지 스프레드(책 느낌), 모바일은 1페이지(싱글)로 전환한다.  
- \- 모바일에서만 스와이프 제스처로 이전/다음 페이지 넘김을 제공한다.

### 비목표 (MVP 제외)

- 진도 저장(로그인/로컬 저장 포함) 기능.  
- \- 추가 패널(커버 상세 패널, 가사 해설 패널, 단어장 패널 등).  
- \- 하이라이트/메모/북마크.  
- \- 오디오 재생(필요 시 차기 버전에서).

## 3\. 타겟 사용자 및 사용 시나리오

### 타겟 사용자

- K-POP/아이돌 콘셉트에 친숙한 한국어 학습자.  
- \- “가사+교재”를 한 번에 보며 따라가고 싶은 사용자.

### 대표 시나리오

1) 사용자가 버전 페이지(/v/\[slug\]) 진입  
2) 2\) 커버 섹션에서 대표(히어로) 이미지를 선택 → 분위기/몰입 강화  
3) 3\) 스크롤로 가사 섹션을 읽고 따라함  
4) 4\) 스크롤로 EPUB 섹션에서 교재를 책처럼 넘기며 학습  
5) 5\) 좌측 도트 인덱스로 커버/가사/EPUB 섹션을 빠르게 오가며 반복 학습

## 4\. 정보 구조(IA) / 라우팅

- `/` : 최신/추천 버전 목록(카드 리스트)  
- \- `/v/[slug]` : 버전 상세 원페이지(스크롤 섹션)  
- \- 섹션 앵커:  
-   \- `#covers`  
-   \- `#lyrics`  
-   \- `#epub`

## 5\. 핵심 UX / 화면 요구사항

## 5.1 공통 레이아웃(원페이지 스크롤)

- 페이지는 세로로 스크롤된다.  
- \- 섹션은 명확한 헤딩(제목)과 충분한 상단 여백으로 구분한다.  
- \- 좌측 도트 인덱스(Sticky):  
-   \- 3개의 점(커버/가사/EPUB)  
-   \- 현재 섹션 활성 상태 표시(색/크기/글로우)  
-   \- 클릭 시 해당 앵커로 스무스 스크롤 이동  
-   \- 모바일에서도 표시하되, 화면을 가리면 자동 축소(예: 투명도 낮추거나 작은 크기) 가능

## 5.2 섹션 A — Covers (\#covers)

### 구성

- 히어로 커버 1장: 16:9, 큰 영역  
- \- 썸네일 3장: 16:9, 히어로 옆(데스크톱) 또는 아래(모바일)  
- \- 총 4장(고정)

### 인터랙션

- 썸네일 클릭/탭 → 히어로 이미지 교체  
- \- 추가 패널 없음  
- \- (옵션) 히어로 클릭 시 라이트박스 확대(ON/OFF 토글 가능한 기능 플래그)

### 반응형

- 데스크톱: 히어로 좌, 썸네일 우(세로 또는 2x2 혼합 가능)  
- \- 모바일: 히어로 상단, 썸네일 하단 가로 스크롤 또는 3열

## 5.3 섹션 B — Lyrics (\#lyrics)

### 구성

- 가사 텍스트 본문  
- \- 줄바꿈 유지  
- \- 긴 텍스트는 섹션 자체가 길어져도 OK(원페이지 스크롤 컨셉에 부합)

### 인터랙션 (MVP)

- 기본 텍스트 읽기 경험에 집중  
- \- 클릭/탭 인터랙션 없음(차기: 행 단위 하이라이트/단어 툴팁)

## 5.4 섹션 C — EPUB (\#epub)

### 목표 UX

- “책처럼” 페이지를 옆으로 넘기는 느낌(가로 방향 페이지 전환)  
- \- 데스크톱/태블릿: 2페이지 스프레드(좌/우 2장 동시 표시)  
- \- 모바일: 1페이지(싱글) 표시  
- \- 페이지 넘김:  
-   \- 데스크톱/태블릿: Prev/Next 버튼(및 키보드 방향키 옵션)  
-   \- 모바일: 스와이프(좌/우)만 지원(버튼은 숨기거나 보조로만 제공)

### 뷰어 영역 규격

- 데스크톱/태블릿: 뷰포트 기준 충분히 크게(예: 70\~90vh) 배치해 “교재 집중” 구간을 만든다.  
- \- 모바일: 상단/하단 UI를 최소화하고 뷰어에 최대 높이 할당.

### 반응형 전환 규칙(권장)

- `viewportWidth < 1024px` : 단일 페이지(싱글)  
- \- `viewportWidth >= 1024px` : 2페이지 스프레드  
- \- 위 규칙은 ePub 뷰어 설정(스프레드 minWidth)과 CSS 레이아웃이 동일 기준을 사용한다.

### 제스처

- 모바일에서만:  
-   \- 좌 스와이프: 다음 페이지  
-   \- 우 스와이프: 이전 페이지  
- \- 데스크톱은 스와이프 미지원(트랙패드 제스처 대응은 MVP에서 제외)

## 6\. 콘텐츠 모델(Sanity) 요구사항

## 6.1 Document: contentVersion

- title: string (필수)  
- \- slug: slug (필수, unique)  
- \- status: string (draft | published) 또는 Sanity 기본 draft/publish 플로우 사용  
- \- publishedAt: datetime (선택)  
- \- theme (선택): object  
-   \- accentColor: string(hex)  
-   \- backgroundVariant: string (예: dark, light, neon)  
- \- covers: array(image) — length \= 4 (필수)  
-   \- 각 이미지에 alt 텍스트 입력 지원(권장)  
- \- lyrics: text 또는 portable text (필수)  
- \- epubFile: file (필수)

## 6.2 운영(에디터) 요구사항

- 새 버전 생성 시 커버 4장/가사/epub 업로드가 한 화면에서 가능해야 한다.  
- \- “커버 1장 \= 히어로(기본 선택)” 규칙을 명확히 안내한다(예: covers\[0\]를 default hero로 사용).  
- \- 게시/비게시 상태가 명확히 구분되어 목록/상세에서 필터 가능해야 한다.

## 7\. 데이터 조회(API) 요구사항

- 버전 목록 조회: published만 노출(정렬: publishedAt desc 또는 업데이트 최신순)  
- \- 버전 상세 조회: slug로 단건 조회  
- \- 필요 필드:  
-   \- title, slug, theme, covers(이미지 참조), lyrics, epubFile(파일 URL), publishedAt

## 8\. 기술 스택(권장)

- 프런트엔드: [Next.js](http://Next.js)(App Router)  
- \- 스타일링: Tailwind CSS 또는 CSS Modules (키치한 테마 토큰 적용 용이)  
- \- CMS: Sanity Studio \+ GROQ  
- \- EPUB 뷰어: [ePub.js](http://ePub.js) 기반(직접 래핑 컴포넌트) 또는 [ePub.js](http://ePub.js) 래퍼 라이브러리 사용  
- \- 배포: Vercel(웹) \+ Sanity(스튜디오)

## 9\. 비기능 요구사항

### 성능

- 커버 이미지는 우선 로딩(히어로 1장 priority), 썸네일은 지연 로딩.  
- \- EPUB 로딩은 \#epub 섹션 진입 시점(IntersectionObserver)에서 시작(초기 로딩 가벼움).  
- \- 이미지/파일 CDN 활용.

### 접근성/사용성

- 도트 인덱스는 클릭 가능한 요소로 명확한 포커스/aria-label 제공.  
- \- 섹션 헤딩은 스크롤 점프 후 사용자가 “어디로 이동했는지” 즉시 알 수 있게 상단 여백 확보.

### 보안/운영

- Sanity Studio는 인증된 운영자만 접근.  
- \- 공개 웹은 읽기 전용이며, draft는 노출하지 않는다.

## 10\. MVP 범위 및 일정(추천)

### MVP (1\~2주)

- Sanity 스키마 구축 \+ Studio 세팅  
- \- 버전 목록(/) \+ 버전 상세(/v/\[slug\]) 원페이지 구성  
- \- 도트 인덱스 앵커 점프 \+ 현재 섹션 하이라이트  
- \- 커버: 히어로+썸네일 전환  
- \- 가사: 기본 텍스트 렌더  
- \- EPUB: 인라인 뷰어 \+ 데스크톱(2p)/모바일(1p) 전환 \+ 모바일 스와이프  
- \- 배포 및 기본 SEO(title/og)

### v1.5\~v2 후보

- 가사 행 단위 인터랙션(반복 재생/하이라이트)  
- \- EPUB 진도 저장(로컬)  
- \- 버전 내 여러 챕터/곡 구성(“트랙” 개념)  
- \- 테마 프리셋(네온/글로시/미니멀 키치)

## 11\. QA 체크리스트(MVP)

- 커버 4장 모두 16:9로 안정적으로 보이는지(다양한 원본 비율에서도)  
- \- 썸네일 클릭 시 히어로가 즉시 교체되는지  
- \- 도트 인덱스 클릭 시 정확히 해당 섹션으로 이동하는지  
- \- 모바일에서 EPUB이 1페이지로 표시되는지  
- \- 1024px 이상에서 EPUB이 2페이지 스프레드로 표시되는지  
- \- 모바일 스와이프로 prev/next가 안정적으로 동작하는지(브라우저: iOS Safari, Android Chrome)  
- \- EPUB 로딩 실패 시 사용자에게 재시도/다운로드 대안이 제공되는지(최소한의 오류 상태 UI)

## 12\. 결정 사항(확정)

- 네비게이션: 좌측 세로 점(도트)  
- \- 커버: 1장 히어로 \+ 나머지 썸네일  
- \- 추가 패널: 없음  
- \- 진행 저장: 없음  
- \- EPUB UX: 데스크톱/태블릿 2페이지 스프레드, 모바일 1페이지 \+ 스와이프(모바일 한정)  
- \- 스프레드 전환 기준: 1024px  
- 